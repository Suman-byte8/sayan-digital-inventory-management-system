(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37819,e=>{"use strict";var t=e.i(66497),s=e.i(10977),a=e.i(96887),l=e.i(31538);function r({isOpen:e,onClose:r,onSuccess:n,editCustomer:i}){let[d,o]=(0,s.useState)({name:"",company:"",email:"",phone:"",address:"",status:"Active"}),[c,x]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i?(o({name:i.name||"",company:"N/A"===i.company?"":i.company,email:i.email||"",phone:i.phone||"",address:i.address||"",status:i.status||"Active"}),x("N/A"===i.address)):(o({name:"",company:"",email:"",phone:"",address:"",status:"Active"}),x(!1))},[i,e]);let u=async()=>{if(!d.name||!d.phone)return void alert("Please fill in at least Name and Phone Number");p(!0);let e={...d,address:c?"N/A":d.address};try{let t;t=i?await (0,l.updateCustomer)(i.id||i._id,e):await (0,l.createCustomer)(e),n(t),r()}catch(t){console.error("Error saving customer:",t);let e=t.response?.data?.message;"Mobile number already exists"===e?alert("Mobile number already exists. Please use a different number or search for the existing customer."):"Email address already exists"===e?alert("Email address already exists. Please use a different email or search for the existing customer."):e?.includes("Duplicate field error")?alert(e):alert(`Error ${i?"updating":"creating"} customer`)}finally{p(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-3 sm:p-4",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-xl rounded-xl shadow-2xl flex flex-col max-h-full overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:i?"Edit Customer":"Add New Customer"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:i?"Update customer details.":"Enter customer details to create a new profile."})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:(0,t.jsx)(a.MdClose,{className:"text-[20px]"})})]}),(0,t.jsx)("div",{className:"p-4 overflow-y-auto",children:(0,t.jsxs)("form",{className:"space-y-4",onSubmit:e=>e.preventDefault(),children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-slate-700 mb-1.5 block",children:"Full Name"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:(0,t.jsx)(a.MdPerson,{className:"text-[18px]"})}),(0,t.jsx)("input",{type:"text",className:"w-full pl-9 pr-3 h-10 rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all",placeholder:"e.g. John Doe",value:d.name,onChange:e=>o({...d,name:e.target.value})})]})]}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsxs)("span",{className:"text-xs font-semibold text-slate-700 mb-1.5 block",children:["Company Name ",(0,t.jsx)("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:(0,t.jsx)(a.MdBusiness,{className:"text-[18px]"})}),(0,t.jsx)("input",{type:"text",className:"w-full pl-9 pr-3 h-10 rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all",placeholder:"e.g. Acme Corp",value:d.company,onChange:e=>o({...d,company:e.target.value})})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"block",children:[(0,t.jsxs)("span",{className:"text-xs font-semibold text-slate-700 mb-1.5 block",children:["Email Address ",(0,t.jsx)("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:(0,t.jsx)(a.MdEmail,{className:"text-[18px]"})}),(0,t.jsx)("input",{type:"email",className:"w-full pl-9 pr-3 h-10 rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all",placeholder:"john@example.com",value:d.email,onChange:e=>o({...d,email:e.target.value})})]})]}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-slate-700 mb-1.5 block",children:"Phone Number"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:(0,t.jsx)(a.MdCall,{className:"text-[18px]"})}),(0,t.jsx)("input",{type:"tel",className:"w-full pl-9 pr-3 h-10 rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all",placeholder:"+1 (555) 000-0000",value:d.phone,onChange:e=>o({...d,phone:e.target.value})})]})]})]}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,t.jsxs)("span",{className:"text-xs font-semibold text-slate-700 block",children:["Address ",(0,t.jsx)("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:c,onChange:e=>{x(e.target.checked),e.target.checked&&o({...d,address:""})},className:"rounded border-slate-300 text-primary focus:ring-primary h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"text-[10px] font-medium text-slate-500",children:"No Address"})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-3 text-slate-400",children:(0,t.jsx)(a.MdLocationOn,{className:"text-[18px]"})}),(0,t.jsx)("textarea",{className:`w-full pl-9 pr-3 py-2.5 min-h-[100px] rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all resize-y ${c?"opacity-50 pointer-events-none":""}`,placeholder:c?"Address not required":"Enter full billing address...",value:d.address,disabled:c,onChange:e=>o({...d,address:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",id:"status-active",name:"status",value:"Active",checked:"Active"===d.status,onChange:()=>o({...d,status:"Active"}),className:"rounded-full border-slate-300 text-primary focus:ring-primary h-3.5 w-3.5"}),(0,t.jsx)("label",{htmlFor:"status-active",className:"text-[10px] font-medium text-slate-700 cursor-pointer",children:"Active"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",id:"status-inactive",name:"status",value:"Inactive",checked:"Inactive"===d.status,onChange:()=>o({...d,status:"Inactive"}),className:"rounded-full border-slate-300 text-primary focus:ring-primary h-3.5 w-3.5"}),(0,t.jsx)("label",{htmlFor:"status-inactive",className:"text-[10px] font-medium text-slate-700 cursor-pointer",children:"Inactive"})]})]})]})}),(0,t.jsxs)("div",{className:"px-4 py-3 border-t border-slate-100 bg-slate-50/50 flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:r,className:"px-5 h-9 rounded-lg border border-slate-200 bg-white text-slate-700 text-xs font-semibold hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm",children:"Cancel"}),(0,t.jsxs)("button",{onClick:u,disabled:m,className:"px-5 h-9 rounded-lg bg-primary text-white text-xs font-bold hover:bg-blue-700 shadow-sm shadow-blue-500/20 transition-all flex items-center gap-2 disabled:opacity-50",children:[(0,t.jsx)(a.MdSave,{className:"text-[16px]"}),m?"Saving...":i?"Update Customer":"Save Customer"]})]})]})}):null}e.s(["default",()=>r])},42776,e=>{"use strict";var t=e.i(66497),s=e.i(10977),a=e.i(96887),l=e.i(31538),r=e.i(37819);function n({isOpen:e,onClose:n}){let[i,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(null),[x,m]=(0,s.useState)([]),[p,u]=(0,s.useState)(!1),[h,b]=(0,s.useState)([]),[g,f]=(0,s.useState)([]),[j,N]=(0,s.useState)("unpaid"),[v,y]=(0,s.useState)(""),[w,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[A,P]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&(d(""),c(null),m([]),f([]),N("unpaid"),y(""),k(!1),D())},[e]);let D=async()=>{try{let e=await (0,l.fetchProducts)();b(e)}catch(e){console.error("Error fetching products:",e)}},M=async()=>{if(i){u(!0);try{let e=await (0,l.searchCustomerByPhone)(i);1===e.length?(c(e[0]),m([])):(m(e),c(null))}catch(e){console.error("Customer not found"),c(null),m([])}finally{u(!1)}}},E=async()=>{if(!o)return void alert("Please select a customer first (search by phone)");if(0===g.length)return void alert("Please add at least one item");if(g.filter(e=>!e.productName).length>0)return void alert("Please enter a product name for all items in the list");k(!0);try{let e={customer:o._id,products:g.map(e=>({product:e.productId||void 0,name:e.productName,quantity:e.quantity,price:e.price})),totalAmount:T,status:"paid"===j?"completed":"pending",paymentStatus:j,notes:v};await (0,l.createOrder)(e),alert("Order saved successfully!"),n()}catch(e){alert("Error saving order")}finally{k(!1)}},O=(e,t,s)=>{f(g.map(a=>a.id===e?{...a,[t]:s}:a))},I=g.reduce((e,t)=>e+t.price*t.quantity,0),F=.1*I,T=I+F;return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 overflow-y-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl my-auto relative flex flex-col max-h-[95vh] animate-in fade-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-3 border-b border-slate-200 flex-shrink-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Add New Order"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Create a new order for a customer"})]}),(0,t.jsx)("button",{onClick:n,className:"text-slate-500 hover:text-slate-900 transition-colors",children:(0,t.jsx)(a.MdClose,{className:"text-[20px]"})})]}),(0,t.jsx)("div",{className:"p-5 overflow-y-auto custom-scrollbar",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1.5 relative",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-900",children:"Customer Phone"}),(0,t.jsxs)("div",{className:"relative flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{className:"w-full rounded-md border-slate-200 bg-slate-50 text-xs px-3 py-2 focus:ring-primary focus:border-primary pr-8",placeholder:"Enter phone number or name...",type:"text",value:i,onChange:e=>{d(e.target.value),""===e.target.value&&m([])},onKeyDown:e=>"Enter"===e.key&&M()}),(0,t.jsx)(a.MdSearch,{className:"absolute right-2.5 top-2 text-slate-400 text-[16px]"}),x.length>0&&(0,t.jsx)("div",{className:"absolute z-[70] left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:x.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>{c(e),d(e.phone),m([])},className:"w-full text-left px-3 py-2 hover:bg-slate-50 border-b border-slate-100 last:border-0 transition-colors",children:[(0,t.jsx)("div",{className:"text-xs font-bold text-slate-900",children:e.name}),(0,t.jsxs)("div",{className:"text-[10px] text-slate-500",children:[e.phone," • ",e.company]})]},e._id))})]}),(0,t.jsx)("button",{type:"button",onClick:M,disabled:p,className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md text-xs font-medium transition-colors",children:p?"...":"Search"})]}),o&&(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-[10px] text-green-600 font-medium bg-green-50 px-2 py-1 rounded border border-green-100",children:[(0,t.jsx)(a.MdCheckCircle,{className:"text-[14px]"}),(0,t.jsxs)("span",{children:["Customer: ",o.name," (",o.company,")"]})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)("button",{className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 rounded-md border border-primary text-primary hover:bg-blue-50 text-xs font-medium transition-colors",type:"button",onClick:()=>S(!0),children:[(0,t.jsx)(a.MdPersonAdd,{className:"text-[16px]"}),"Add New Customer"]})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-900",children:"Order Items"}),(0,t.jsxs)("button",{className:"text-xs text-primary font-medium hover:underline flex items-center gap-1",type:"button",onClick:()=>{f([...g,{id:Date.now().toString(),productId:"",productName:"",quantity:1,price:0}])},children:[(0,t.jsx)(a.MdAdd,{className:"text-[14px]"})," Add Item"]})]}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200 flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"hidden md:grid grid-cols-12 gap-3 text-[10px] font-medium text-slate-500 uppercase tracking-wider mb-0.5",children:[(0,t.jsx)("div",{className:"col-span-6",children:"Product / Service"}),(0,t.jsx)("div",{className:"col-span-2 text-right",children:"Qty"}),(0,t.jsx)("div",{className:"col-span-2 text-right",children:"Price"}),(0,t.jsx)("div",{className:"col-span-2 text-right",children:"Total"})]}),g.map(e=>(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-center group relative border-b border-dashed border-slate-200 last:border-0 pb-2 last:pb-0",children:[(0,t.jsxs)("div",{className:"col-span-1 md:col-span-6 relative",children:[(0,t.jsx)("label",{className:"md:hidden text-[10px] text-slate-500 mb-0.5 block",children:"Product"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{className:"w-full rounded-md border-slate-200 bg-white text-xs px-2.5 py-1.5 focus:ring-primary focus:border-primary",placeholder:"Search product...",value:e.productName,onChange:t=>{f(g.map(s=>s.id===e.id?{...s,productName:t.target.value,productId:""}:s)),P(e.id)},onFocus:()=>P(e.id)}),A===e.id&&e.productName&&(0,t.jsx)("div",{className:"absolute z-[70] left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:h.filter(t=>t.name.toLowerCase().includes(e.productName.toLowerCase())).map(s=>(0,t.jsxs)("button",{type:"button",onClick:()=>{var t;return t=e.id,void(f(g.map(e=>e.id===t?{...e,productId:s._id,productName:s.name,price:s.sellingPrice}:e)),P(null))},className:"w-full text-left px-3 py-2 hover:bg-slate-50 border-b border-slate-100 last:border-0 transition-colors",children:[(0,t.jsx)("div",{className:"text-xs font-bold text-slate-900",children:s.name}),(0,t.jsxs)("div",{className:"text-[10px] text-slate-500",children:["$",s.sellingPrice," • ",s.category]})]},s._id))})]})]}),(0,t.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,t.jsx)("label",{className:"md:hidden text-[10px] text-slate-500 mb-0.5 block",children:"Qty"}),(0,t.jsx)("input",{className:"w-full rounded-md border-slate-200 bg-white text-xs px-2.5 py-1.5 text-right focus:ring-primary focus:border-primary",type:"number",value:e.quantity,onChange:t=>O(e.id,"quantity",parseInt(t.target.value)||0)})]}),(0,t.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,t.jsx)("label",{className:"md:hidden text-[10px] text-slate-500 mb-0.5 block",children:"Price"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-2.5 top-1.5 text-slate-500 text-xs",children:"$"}),(0,t.jsx)("input",{className:"w-full rounded-md border-slate-200 bg-white text-xs pl-5 pr-2.5 py-1.5 text-right focus:ring-primary focus:border-primary",type:"number",value:e.price,onChange:t=>O(e.id,"price",parseFloat(t.target.value)||0)})]})]}),(0,t.jsxs)("div",{className:"col-span-1 md:col-span-2 flex items-center justify-between md:justify-end gap-2",children:[(0,t.jsx)("label",{className:"md:hidden text-[10px] text-slate-500",children:"Total"}),(0,t.jsxs)("span",{className:"text-xs font-semibold text-slate-900",children:["$",(e.quantity*e.price).toFixed(2)]}),(0,t.jsx)("button",{className:"text-red-500 hover:bg-red-50 p-1 rounded transition-all ml-1",type:"button",onClick:()=>{var t;return t=e.id,void f(g.filter(e=>e.id!==t))},children:(0,t.jsx)(a.MdDelete,{className:"text-[16px]"})})]})]},e.id))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-1",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-900",children:"Payment Status"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,t.jsx)("input",{className:"text-primary focus:ring-primary bg-white border-slate-300 w-3.5 h-3.5",name:"payment_status",type:"radio",checked:"unpaid"===j,onChange:()=>N("unpaid")}),(0,t.jsx)("span",{className:"text-xs text-slate-900",children:"Unpaid / Due"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,t.jsx)("input",{className:"text-primary focus:ring-primary bg-white border-slate-300 w-3.5 h-3.5",name:"payment_status",type:"radio",checked:"paid"===j,onChange:()=>N("paid")}),(0,t.jsx)("span",{className:"text-xs text-slate-900",children:"Paid"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-900",children:"Order Notes"}),(0,t.jsx)("textarea",{className:"w-full rounded-md border-slate-200 bg-slate-50 text-xs px-3 py-2 focus:ring-primary focus:border-primary placeholder:text-slate-400",placeholder:"Internal notes about this order...",rows:2,value:v,onChange:e=>y(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 bg-slate-50 p-3 rounded-lg border border-slate-200 h-fit",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Subtotal"}),(0,t.jsxs)("span",{className:"font-medium text-slate-900",children:["$",I.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Tax (10%)"}),(0,t.jsxs)("span",{className:"font-medium text-slate-900",children:["$",F.toFixed(2)]})]}),(0,t.jsx)("div",{className:"h-px bg-slate-200 my-0.5"}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm font-bold",children:[(0,t.jsx)("span",{className:"text-slate-900",children:"Grand Total"}),(0,t.jsxs)("span",{className:"text-primary",children:["$",T.toFixed(2)]})]})]})]})]})}),(0,t.jsx)(r.default,{isOpen:C,onClose:()=>S(!1),onSuccess:e=>{c(e),d(e.phone)}}),(0,t.jsxs)("div",{className:"px-5 py-3 border-t border-slate-200 bg-white flex justify-end gap-2.5 rounded-b-xl flex-shrink-0",children:[(0,t.jsx)("button",{onClick:n,className:"px-4 py-2 rounded-lg border border-slate-200 text-slate-900 text-xs font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{onClick:E,disabled:w,className:"px-4 py-2 rounded-lg bg-primary text-white text-xs font-medium hover:bg-blue-700 transition-colors shadow-sm disabled:opacity-50 flex items-center gap-2",children:[(0,t.jsx)(a.MdSave,{className:"text-[16px]"}),w?"Saving...":"Save Order"]})]})]})}):null}e.s(["default",()=>n])},40728,e=>{"use strict";var t=e.i(66497),s=e.i(10977),a=e.i(31538),l=e.i(42776),r=e.i(25697),n=e.i(96887);function i(){let[e,i]=(0,s.useState)(!1),[d,o]=(0,s.useState)([]),[c,x]=(0,s.useState)(!0),[m,p]=(0,s.useState)(0),[u,h]=(0,s.useState)(1),[b,g]=(0,s.useState)(1),[f,j]=(0,s.useState)(""),[N,v]=(0,s.useState)("All"),[y,w]=(0,s.useState)("All"),[k,C]=(0,s.useState)("Last 30 Days"),{settings:S}=(0,r.useSettings)(),A=(0,s.useMemo)(()=>{if(!S?.currency)return"$";switch(S.currency){case"INR":return"₹";case"USD":default:return"$";case"EUR":return"€";case"GBP":return"£"}},[S?.currency]),P=async()=>{x(!0);try{let e={page:u,limit:10,search:f,status:N,paymentStatus:y};"Today"===k?e.startDate=new Date().setHours(0,0,0,0):"Last 7 Days"===k&&(e.startDate=new Date(Date.now()-6048e5).toISOString());let t=await (0,a.fetchOrders)(e);o(t.orders),p(t.total),g(t.pages)}catch(e){console.error("Error loading orders:",e)}finally{x(!1)}};(0,s.useEffect)(()=>{P()},[u,N,y,k]);let D=async(e,t)=>{try{await (0,a.updateOrder)(e,{status:t}),P()}catch(e){console.error("Error updating order status:",e)}},M=async e=>{if(window.confirm("Are you sure you want to delete this order?"))try{await (0,a.deleteOrder)(e),P()}catch(e){console.error("Error deleting order:",e)}};return(0,t.jsxs)("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[(0,t.jsx)("header",{className:"flex-shrink-0 bg-surface-light border-b border-slate-200",children:(0,t.jsx)("div",{className:"max-w-full mx-auto px-4 py-3",children:(0,t.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsx)("h2",{className:"text-slate-900 text-xl font-bold leading-tight tracking-tight",children:"Customer Orders"}),(0,t.jsx)("p",{className:"text-slate-500 text-xs font-normal",children:"Track and manage printing jobs efficiently"})]}),(0,t.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center justify-center gap-1.5 cursor-pointer overflow-hidden rounded-lg h-9 px-3 bg-primary hover:bg-blue-700 text-white text-xs font-bold leading-normal tracking-wide transition-colors shadow-sm",children:[(0,t.jsx)(n.MdAdd,{className:"text-[16px]"}),(0,t.jsx)("span",{children:"New Order"})]})]})})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 scroll-smooth",children:(0,t.jsxs)("div",{className:"max-w-full mx-auto flex flex-col gap-4 pb-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1 rounded-lg p-3 border border-slate-200 bg-surface-light shadow-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("p",{className:"text-slate-500 text-xs font-medium",children:"Orders Pending"}),(0,t.jsx)("span",{className:"p-1 rounded-md bg-orange-100 text-orange-500",children:(0,t.jsx)(n.MdPendingActions,{className:"text-[16px]"})})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2 mt-1",children:[(0,t.jsx)("p",{className:"text-slate-900 text-2xl font-bold",children:d.filter(e=>"pending"===e.status).length}),(0,t.jsx)("span",{className:"text-slate-400 text-[10px] font-medium px-1.5 py-0.5 rounded",children:m>0?`${(d.filter(e=>"pending"===e.status).length/d.length*100).toFixed(0)}%`:"0%"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 rounded-lg p-3 border border-slate-200 bg-surface-light shadow-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("p",{className:"text-slate-500 text-xs font-medium",children:"In Production"}),(0,t.jsx)("span",{className:"p-1 rounded-md bg-blue-100 text-primary",children:(0,t.jsx)(n.MdPrint,{className:"text-[16px]"})})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2 mt-1",children:[(0,t.jsx)("p",{className:"text-slate-900 text-2xl font-bold",children:d.filter(e=>"completed"===e.status).length}),(0,t.jsx)("span",{className:"text-slate-400 text-[10px] font-medium px-1.5 py-0.5 rounded",children:m>0?`${(d.filter(e=>"completed"===e.status).length/d.length*100).toFixed(0)}%`:"0%"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 rounded-lg p-3 border border-slate-200 bg-surface-light shadow-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("p",{className:"text-slate-500 text-xs font-medium",children:"Revenue Today"}),(0,t.jsx)("span",{className:"p-1 rounded-md bg-emerald-100 text-emerald-600",children:(0,t.jsx)(n.MdPayments,{className:"text-[16px]"})})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2 mt-1",children:[(0,t.jsxs)("p",{className:"text-slate-900 text-2xl font-bold",children:[A,d.reduce((e,t)=>e+(t.totalAmount||0),0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,t.jsx)("span",{className:"text-slate-400 text-[10px] font-medium px-1.5 py-0.5 rounded",children:"This page"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-3 justify-between items-start lg:items-center bg-surface-light p-3 rounded-lg border border-slate-200 shadow-sm",children:[(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),h(1),P()},className:"flex flex-col min-w-[280px] w-full lg:w-auto h-9",children:(0,t.jsxs)("div",{className:"flex w-full flex-1 items-center rounded-lg h-full bg-background-light border border-transparent focus-within:border-primary focus-within:ring-1 focus-within:ring-primary transition-all",children:[(0,t.jsx)("div",{className:"text-slate-400 flex items-center justify-center pl-2.5",children:(0,t.jsx)(n.MdSearch,{className:"text-[18px]"})}),(0,t.jsx)("input",{className:"w-full bg-transparent border-none text-xs text-slate-900 placeholder:text-slate-400 focus:ring-0 px-2.5 outline-none",placeholder:"Search by Order ID, Customer...",value:f,onChange:e=>j(e.target.value)})]})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 items-center w-full lg:w-auto",children:[(0,t.jsx)("div",{className:"relative group",children:(0,t.jsxs)("select",{value:N,onChange:e=>{v(e.target.value),h(1)},className:"flex h-8 items-center justify-between gap-x-1.5 rounded bg-background-light border border-transparent hover:border-slate-200 px-2.5 transition-colors text-slate-900 text-xs font-medium outline-none appearance-none cursor-pointer pr-8",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7' /%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1rem"},children:[(0,t.jsx)("option",{value:"All",children:"Status: All"}),(0,t.jsx)("option",{value:"pending",children:"Status: Pending"}),(0,t.jsx)("option",{value:"completed",children:"Status: Completed"}),(0,t.jsx)("option",{value:"cancelled",children:"Status: Cancelled"})]})}),(0,t.jsx)("div",{className:"relative group",children:(0,t.jsxs)("select",{value:k,onChange:e=>{C(e.target.value),h(1)},className:"flex h-8 items-center justify-between gap-x-1.5 rounded bg-background-light border border-transparent hover:border-slate-200 px-2.5 transition-colors text-slate-900 text-xs font-medium outline-none appearance-none cursor-pointer pr-8",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7' /%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1rem"},children:[(0,t.jsx)("option",{value:"All Time",children:"Date: All Time"}),(0,t.jsx)("option",{value:"Today",children:"Date: Today"}),(0,t.jsx)("option",{value:"Last 7 Days",children:"Date: Last 7 Days"}),(0,t.jsx)("option",{value:"Last 30 Days",children:"Date: Last 30 Days"})]})}),(0,t.jsx)("div",{className:"relative group",children:(0,t.jsxs)("select",{value:y,onChange:e=>{w(e.target.value),h(1)},className:"flex h-8 items-center justify-between gap-x-1.5 rounded bg-background-light border border-transparent hover:border-slate-200 px-2.5 transition-colors text-slate-900 text-xs font-medium outline-none appearance-none cursor-pointer pr-8",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7' /%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1rem"},children:[(0,t.jsx)("option",{value:"All",children:"Payment: All"}),(0,t.jsx)("option",{value:"paid",children:"Payment: Paid"}),(0,t.jsx)("option",{value:"unpaid",children:"Payment: Unpaid"}),(0,t.jsx)("option",{value:"partial",children:"Payment: Partial"})]})}),(0,t.jsx)("div",{className:"h-5 w-px bg-slate-200 hidden lg:block mx-0.5"}),(0,t.jsx)("button",{onClick:()=>{j(""),v("All"),w("All"),C("Last 30 Days"),h(1)},className:"flex items-center justify-center size-8 rounded bg-background-light hover:bg-slate-200 transition-colors text-slate-500",title:"Reset Filters",children:(0,t.jsx)(n.MdFilterList,{className:"text-[16px]"})})]})]}),(0,t.jsxs)("div",{className:"bg-surface-light border border-slate-200 rounded-lg shadow-sm overflow-hidden flex flex-col",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-background-light border-b border-slate-200",children:[(0,t.jsx)("th",{className:"p-2.5 w-10",children:(0,t.jsx)("input",{className:"rounded border-gray-300 text-primary focus:ring-primary bg-white h-3.5 w-3.5",type:"checkbox"})}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:"Order ID"}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:"Customer"}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:"Phone"}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:"Job Details"}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:"Description"}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:"Date"}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Amount"}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"p-2.5 text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-200",children:d.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors group",children:[(0,t.jsx)("td",{className:"p-2.5",children:(0,t.jsx)("input",{className:"rounded border-gray-300 text-primary focus:ring-primary bg-white h-3.5 w-3.5",type:"checkbox"})}),(0,t.jsx)("td",{className:"p-2.5",children:(0,t.jsxs)("a",{className:"text-xs font-semibold text-primary hover:underline",href:`/orders/${e._id}`,children:["#",e._id.substring(0,8)]})}),(0,t.jsx)("td",{className:"p-2.5",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"size-6 rounded-full bg-slate-200 flex items-center justify-center text-[10px] font-bold text-slate-600",children:e.customer?.name?.substring(0,2).toUpperCase()||"NA"}),(0,t.jsx)("span",{className:"text-xs font-medium text-slate-900",children:e.customer?.name||"Unknown"})]})}),(0,t.jsx)("td",{className:"p-2.5 text-xs text-slate-500",children:e.customer?.phone||"N/A"}),(0,t.jsxs)("td",{className:"p-2.5 text-xs text-slate-500",children:[e.products?.length||0," Items"]}),(0,t.jsx)("td",{className:"p-2.5 text-xs text-slate-500 max-w-[150px] truncate",title:e.notes,children:e.notes||"No description"}),(0,t.jsx)("td",{className:"p-2.5 text-xs text-slate-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsxs)("td",{className:"p-2.5 text-xs font-semibold text-slate-900 text-right",children:[A,e.totalAmount?.toFixed(2)]}),(0,t.jsx)("td",{className:"p-2.5",children:(0,t.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium ${"completed"===e.status?"bg-green-100 text-green-800":"delivered"===e.status?"bg-blue-100 text-blue-800":"hold"===e.status?"bg-orange-100 text-orange-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})}),(0,t.jsx)("td",{className:"p-2.5",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>D(e._id,"delivered"),className:"px-1.5 py-0.5 rounded bg-blue-50 text-blue-600 hover:bg-blue-100 text-[10px] font-bold transition-colors",title:"Mark as Delivered",children:"Delivered"}),(0,t.jsx)("button",{onClick:()=>D(e._id,"pending"),className:"px-1.5 py-0.5 rounded bg-yellow-50 text-yellow-600 hover:bg-yellow-100 text-[10px] font-bold transition-colors",title:"Mark as Pending",children:"Pending"}),(0,t.jsx)("button",{onClick:()=>D(e._id,"completed"),className:"px-1.5 py-0.5 rounded bg-green-50 text-green-600 hover:bg-green-100 text-[10px] font-bold transition-colors",title:"Mark as Done",children:"Done"}),(0,t.jsx)("button",{onClick:()=>D(e._id,"hold"),className:"px-1.5 py-0.5 rounded bg-orange-50 text-orange-600 hover:bg-orange-100 text-[10px] font-bold transition-colors",title:"Mark as Hold",children:"Hold"}),(0,t.jsx)("button",{onClick:()=>M(e._id),className:"p-1 rounded text-red-500 hover:bg-red-50 transition-colors",title:"Delete Order",children:(0,t.jsx)(n.MdDelete,{className:"text-[16px]"})})]})})]},e._id))})]})}),(0,t.jsxs)("div",{className:"px-4 py-2.5 border-t border-slate-200 flex items-center justify-between bg-background-light",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("p",{className:"text-[10px] text-slate-500",children:["Showing ",(0,t.jsxs)("span",{className:"font-semibold text-slate-900",children:[(u-1)*10+1,"-",Math.min(10*u,m)]})," of ",(0,t.jsx)("span",{className:"font-semibold text-slate-900",children:m})," orders"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("button",{onClick:()=>h(e=>Math.max(e-1,1)),disabled:1===u,className:"p-1 rounded-md text-slate-500 hover:bg-slate-200 disabled:opacity-50",children:(0,t.jsx)(n.MdChevronLeft,{className:"text-[16px]"})}),[...Array(b)].map((e,s)=>(0,t.jsx)("button",{onClick:()=>h(s+1),className:`px-2 py-0.5 rounded text-xs font-medium ${u===s+1?"bg-primary text-white":"text-slate-900 hover:bg-slate-200"}`,children:s+1},s+1)),(0,t.jsx)("button",{onClick:()=>h(e=>Math.min(e+1,b)),disabled:u===b,className:"p-1 rounded-md text-slate-500 hover:bg-slate-200 disabled:opacity-50",children:(0,t.jsx)(n.MdChevronRight,{className:"text-[16px]"})})]})]})]})]})}),(0,t.jsx)(l.default,{isOpen:e,onClose:()=>i(!1)})]})}e.s(["default",()=>i])}]);