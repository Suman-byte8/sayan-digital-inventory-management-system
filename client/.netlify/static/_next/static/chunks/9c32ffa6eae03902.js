(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37819,e=>{"use strict";var s=e.i(66497),t=e.i(10977),a=e.i(96887),l=e.i(31538);function r({isOpen:e,onClose:r,onSuccess:i,editCustomer:d}){let[n,o]=(0,t.useState)({name:"",company:"",email:"",phone:"",address:"",status:"Active"}),[c,x]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{d?(o({name:d.name||"",company:"N/A"===d.company?"":d.company,email:d.email||"",phone:d.phone||"",address:d.address||"",status:d.status||"Active"}),x("N/A"===d.address)):(o({name:"",company:"",email:"",phone:"",address:"",status:"Active"}),x(!1))},[d,e]);let u=async()=>{if(!n.name||!n.phone)return void alert("Please fill in at least Name and Phone Number");p(!0);let e={...n,address:c?"N/A":n.address};try{let s;s=d?await (0,l.updateCustomer)(d.id||d._id,e):await (0,l.createCustomer)(e),i(s),r()}catch(s){console.error("Error saving customer:",s);let e=s.response?.data?.message;"Mobile number already exists"===e?alert("Mobile number already exists. Please use a different number or search for the existing customer."):"Email address already exists"===e?alert("Email address already exists. Please use a different email or search for the existing customer."):e?.includes("Duplicate field error")?alert(e):alert(`Error ${d?"updating":"creating"} customer`)}finally{p(!1)}};return e?(0,s.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-3 sm:p-4",children:(0,s.jsxs)("div",{className:"bg-white w-full max-w-xl rounded-xl shadow-2xl flex flex-col max-h-full overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:d?"Edit Customer":"Add New Customer"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:d?"Update customer details.":"Enter customer details to create a new profile."})]}),(0,s.jsx)("button",{onClick:r,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:(0,s.jsx)(a.MdClose,{className:"text-[20px]"})})]}),(0,s.jsx)("div",{className:"p-4 overflow-y-auto",children:(0,s.jsxs)("form",{className:"space-y-4",onSubmit:e=>e.preventDefault(),children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-700 mb-1.5 block",children:"Full Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:(0,s.jsx)(a.MdPerson,{className:"text-[18px]"})}),(0,s.jsx)("input",{type:"text",className:"w-full pl-9 pr-3 h-10 rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all",placeholder:"e.g. John Doe",value:n.name,onChange:e=>o({...n,name:e.target.value})})]})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsxs)("span",{className:"text-xs font-semibold text-slate-700 mb-1.5 block",children:["Company Name ",(0,s.jsx)("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:(0,s.jsx)(a.MdBusiness,{className:"text-[18px]"})}),(0,s.jsx)("input",{type:"text",className:"w-full pl-9 pr-3 h-10 rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all",placeholder:"e.g. Acme Corp",value:n.company,onChange:e=>o({...n,company:e.target.value})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsxs)("span",{className:"text-xs font-semibold text-slate-700 mb-1.5 block",children:["Email Address ",(0,s.jsx)("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:(0,s.jsx)(a.MdEmail,{className:"text-[18px]"})}),(0,s.jsx)("input",{type:"email",className:"w-full pl-9 pr-3 h-10 rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all",placeholder:"john@example.com",value:n.email,onChange:e=>o({...n,email:e.target.value})})]})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-700 mb-1.5 block",children:"Phone Number"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:(0,s.jsx)(a.MdCall,{className:"text-[18px]"})}),(0,s.jsx)("input",{type:"tel",className:"w-full pl-9 pr-3 h-10 rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all",placeholder:"+1 (555) 000-0000",value:n.phone,onChange:e=>o({...n,phone:e.target.value})})]})]})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,s.jsxs)("span",{className:"text-xs font-semibold text-slate-700 block",children:["Address ",(0,s.jsx)("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:c,onChange:e=>{x(e.target.checked),e.target.checked&&o({...n,address:""})},className:"rounded border-slate-300 text-primary focus:ring-primary h-3.5 w-3.5"}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-slate-500",children:"No Address"})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-3 text-slate-400",children:(0,s.jsx)(a.MdLocationOn,{className:"text-[18px]"})}),(0,s.jsx)("textarea",{className:`w-full pl-9 pr-3 py-2.5 min-h-[100px] rounded-lg border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-primary focus:ring-primary/20 transition-all resize-y ${c?"opacity-50 pointer-events-none":""}`,placeholder:c?"Address not required":"Enter full billing address...",value:n.address,disabled:c,onChange:e=>o({...n,address:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",id:"status-active",name:"status",value:"Active",checked:"Active"===n.status,onChange:()=>o({...n,status:"Active"}),className:"rounded-full border-slate-300 text-primary focus:ring-primary h-3.5 w-3.5"}),(0,s.jsx)("label",{htmlFor:"status-active",className:"text-[10px] font-medium text-slate-700 cursor-pointer",children:"Active"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",id:"status-inactive",name:"status",value:"Inactive",checked:"Inactive"===n.status,onChange:()=>o({...n,status:"Inactive"}),className:"rounded-full border-slate-300 text-primary focus:ring-primary h-3.5 w-3.5"}),(0,s.jsx)("label",{htmlFor:"status-inactive",className:"text-[10px] font-medium text-slate-700 cursor-pointer",children:"Inactive"})]})]})]})}),(0,s.jsxs)("div",{className:"px-4 py-3 border-t border-slate-100 bg-slate-50/50 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:r,className:"px-5 h-9 rounded-lg border border-slate-200 bg-white text-slate-700 text-xs font-semibold hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm",children:"Cancel"}),(0,s.jsxs)("button",{onClick:u,disabled:m,className:"px-5 h-9 rounded-lg bg-primary text-white text-xs font-bold hover:bg-blue-700 shadow-sm shadow-blue-500/20 transition-all flex items-center gap-2 disabled:opacity-50",children:[(0,s.jsx)(a.MdSave,{className:"text-[16px]"}),m?"Saving...":d?"Update Customer":"Save Customer"]})]})]})}):null}e.s(["default",()=>r])},42776,e=>{"use strict";var s=e.i(66497),t=e.i(10977),a=e.i(96887),l=e.i(31538),r=e.i(37819);function i({isOpen:e,onClose:i}){let[d,n]=(0,t.useState)(""),[o,c]=(0,t.useState)(null),[x,m]=(0,t.useState)([]),[p,u]=(0,t.useState)(!1),[h,g]=(0,t.useState)([]),[b,f]=(0,t.useState)([]),[j,N]=(0,t.useState)("unpaid"),[y,v]=(0,t.useState)(""),[w,C]=(0,t.useState)(!1),[k,S]=(0,t.useState)(!1),[P,A]=(0,t.useState)(null);(0,t.useEffect)(()=>{e&&(n(""),c(null),m([]),f([]),N("unpaid"),v(""),C(!1),M())},[e]);let M=async()=>{try{let e=await (0,l.fetchProducts)();g(e)}catch(e){console.error("Error fetching products:",e)}},O=async()=>{if(d){u(!0);try{let e=await (0,l.searchCustomerByPhone)(d);1===e.length?(c(e[0]),m([])):(m(e),c(null))}catch(e){console.error("Customer not found"),c(null),m([])}finally{u(!1)}}},I=async()=>{if(!o)return void alert("Please select a customer first (search by phone)");if(0===b.length)return void alert("Please add at least one item");if(b.filter(e=>!e.productName).length>0)return void alert("Please enter a product name for all items in the list");C(!0);try{let e={customer:o._id,products:b.map(e=>({product:e.productId||void 0,name:e.productName,quantity:e.quantity,price:e.price})),totalAmount:F,status:"paid"===j?"completed":"pending",paymentStatus:j,notes:y};await (0,l.createOrder)(e),alert("Order saved successfully!"),i()}catch(e){alert("Error saving order")}finally{C(!1)}},D=(e,s,t)=>{f(b.map(a=>a.id===e?{...a,[s]:t}:a))},E=b.reduce((e,s)=>e+s.price*s.quantity,0),T=.1*E,F=E+T;return e?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 overflow-y-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl my-auto relative flex flex-col max-h-[95vh] animate-in fade-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-3 border-b border-slate-200 flex-shrink-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Add New Order"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Create a new order for a customer"})]}),(0,s.jsx)("button",{onClick:i,className:"text-slate-500 hover:text-slate-900 transition-colors",children:(0,s.jsx)(a.MdClose,{className:"text-[20px]"})})]}),(0,s.jsx)("div",{className:"p-5 overflow-y-auto custom-scrollbar",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 relative",children:[(0,s.jsx)("label",{className:"text-xs font-semibold text-slate-900",children:"Customer Phone"}),(0,s.jsxs)("div",{className:"relative flex gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)("input",{className:"w-full rounded-md border-slate-200 bg-slate-50 text-xs px-3 py-2 focus:ring-primary focus:border-primary pr-8",placeholder:"Enter phone number or name...",type:"text",value:d,onChange:e=>{n(e.target.value),""===e.target.value&&m([])},onKeyDown:e=>"Enter"===e.key&&O()}),(0,s.jsx)(a.MdSearch,{className:"absolute right-2.5 top-2 text-slate-400 text-[16px]"}),x.length>0&&(0,s.jsx)("div",{className:"absolute z-[70] left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:x.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>{c(e),n(e.phone),m([])},className:"w-full text-left px-3 py-2 hover:bg-slate-50 border-b border-slate-100 last:border-0 transition-colors",children:[(0,s.jsx)("div",{className:"text-xs font-bold text-slate-900",children:e.name}),(0,s.jsxs)("div",{className:"text-[10px] text-slate-500",children:[e.phone," • ",e.company]})]},e._id))})]}),(0,s.jsx)("button",{type:"button",onClick:O,disabled:p,className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md text-xs font-medium transition-colors",children:p?"...":"Search"})]}),o&&(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-[10px] text-green-600 font-medium bg-green-50 px-2 py-1 rounded border border-green-100",children:[(0,s.jsx)(a.MdCheckCircle,{className:"text-[14px]"}),(0,s.jsxs)("span",{children:["Customer: ",o.name," (",o.company,")"]})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("button",{className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 rounded-md border border-primary text-primary hover:bg-blue-50 text-xs font-medium transition-colors",type:"button",onClick:()=>S(!0),children:[(0,s.jsx)(a.MdPersonAdd,{className:"text-[16px]"}),"Add New Customer"]})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-xs font-semibold text-slate-900",children:"Order Items"}),(0,s.jsxs)("button",{className:"text-xs text-primary font-medium hover:underline flex items-center gap-1",type:"button",onClick:()=>{f([...b,{id:Date.now().toString(),productId:"",productName:"",quantity:1,price:0}])},children:[(0,s.jsx)(a.MdAdd,{className:"text-[14px]"})," Add Item"]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200 flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"hidden md:grid grid-cols-12 gap-3 text-[10px] font-medium text-slate-500 uppercase tracking-wider mb-0.5",children:[(0,s.jsx)("div",{className:"col-span-6",children:"Product / Service"}),(0,s.jsx)("div",{className:"col-span-2 text-right",children:"Qty"}),(0,s.jsx)("div",{className:"col-span-2 text-right",children:"Price"}),(0,s.jsx)("div",{className:"col-span-2 text-right",children:"Total"})]}),b.map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-center group relative border-b border-dashed border-slate-200 last:border-0 pb-2 last:pb-0",children:[(0,s.jsxs)("div",{className:"col-span-1 md:col-span-6 relative",children:[(0,s.jsx)("label",{className:"md:hidden text-[10px] text-slate-500 mb-0.5 block",children:"Product"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{className:"w-full rounded-md border-slate-200 bg-white text-xs px-2.5 py-1.5 focus:ring-primary focus:border-primary",placeholder:"Search product...",value:e.productName,onChange:s=>{f(b.map(t=>t.id===e.id?{...t,productName:s.target.value,productId:""}:t)),A(e.id)},onFocus:()=>A(e.id)}),P===e.id&&e.productName&&(0,s.jsx)("div",{className:"absolute z-[70] left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:h.filter(s=>s.name.toLowerCase().includes(e.productName.toLowerCase())).map(t=>(0,s.jsxs)("button",{type:"button",onClick:()=>{var s;return s=e.id,void(f(b.map(e=>e.id===s?{...e,productId:t._id,productName:t.name,price:t.sellingPrice}:e)),A(null))},className:"w-full text-left px-3 py-2 hover:bg-slate-50 border-b border-slate-100 last:border-0 transition-colors",children:[(0,s.jsx)("div",{className:"text-xs font-bold text-slate-900",children:t.name}),(0,s.jsxs)("div",{className:"text-[10px] text-slate-500",children:["$",t.sellingPrice," • ",t.category]})]},t._id))})]})]}),(0,s.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,s.jsx)("label",{className:"md:hidden text-[10px] text-slate-500 mb-0.5 block",children:"Qty"}),(0,s.jsx)("input",{className:"w-full rounded-md border-slate-200 bg-white text-xs px-2.5 py-1.5 text-right focus:ring-primary focus:border-primary",type:"number",value:e.quantity,onChange:s=>D(e.id,"quantity",parseInt(s.target.value)||0)})]}),(0,s.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,s.jsx)("label",{className:"md:hidden text-[10px] text-slate-500 mb-0.5 block",children:"Price"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-2.5 top-1.5 text-slate-500 text-xs",children:"$"}),(0,s.jsx)("input",{className:"w-full rounded-md border-slate-200 bg-white text-xs pl-5 pr-2.5 py-1.5 text-right focus:ring-primary focus:border-primary",type:"number",value:e.price,onChange:s=>D(e.id,"price",parseFloat(s.target.value)||0)})]})]}),(0,s.jsxs)("div",{className:"col-span-1 md:col-span-2 flex items-center justify-between md:justify-end gap-2",children:[(0,s.jsx)("label",{className:"md:hidden text-[10px] text-slate-500",children:"Total"}),(0,s.jsxs)("span",{className:"text-xs font-semibold text-slate-900",children:["$",(e.quantity*e.price).toFixed(2)]}),(0,s.jsx)("button",{className:"text-red-500 hover:bg-red-50 p-1 rounded transition-all ml-1",type:"button",onClick:()=>{var s;return s=e.id,void f(b.filter(e=>e.id!==s))},children:(0,s.jsx)(a.MdDelete,{className:"text-[16px]"})})]})]},e.id))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-1",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-semibold text-slate-900",children:"Payment Status"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,s.jsx)("input",{className:"text-primary focus:ring-primary bg-white border-slate-300 w-3.5 h-3.5",name:"payment_status",type:"radio",checked:"unpaid"===j,onChange:()=>N("unpaid")}),(0,s.jsx)("span",{className:"text-xs text-slate-900",children:"Unpaid / Due"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,s.jsx)("input",{className:"text-primary focus:ring-primary bg-white border-slate-300 w-3.5 h-3.5",name:"payment_status",type:"radio",checked:"paid"===j,onChange:()=>N("paid")}),(0,s.jsx)("span",{className:"text-xs text-slate-900",children:"Paid"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-semibold text-slate-900",children:"Order Notes"}),(0,s.jsx)("textarea",{className:"w-full rounded-md border-slate-200 bg-slate-50 text-xs px-3 py-2 focus:ring-primary focus:border-primary placeholder:text-slate-400",placeholder:"Internal notes about this order...",rows:2,value:y,onChange:e=>v(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 bg-slate-50 p-3 rounded-lg border border-slate-200 h-fit",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,s.jsx)("span",{className:"text-slate-500",children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-medium text-slate-900",children:["$",E.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,s.jsx)("span",{className:"text-slate-500",children:"Tax (10%)"}),(0,s.jsxs)("span",{className:"font-medium text-slate-900",children:["$",T.toFixed(2)]})]}),(0,s.jsx)("div",{className:"h-px bg-slate-200 my-0.5"}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm font-bold",children:[(0,s.jsx)("span",{className:"text-slate-900",children:"Grand Total"}),(0,s.jsxs)("span",{className:"text-primary",children:["$",F.toFixed(2)]})]})]})]})]})}),(0,s.jsx)(r.default,{isOpen:k,onClose:()=>S(!1),onSuccess:e=>{c(e),n(e.phone)}}),(0,s.jsxs)("div",{className:"px-5 py-3 border-t border-slate-200 bg-white flex justify-end gap-2.5 rounded-b-xl flex-shrink-0",children:[(0,s.jsx)("button",{onClick:i,className:"px-4 py-2 rounded-lg border border-slate-200 text-slate-900 text-xs font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{onClick:I,disabled:w,className:"px-4 py-2 rounded-lg bg-primary text-white text-xs font-medium hover:bg-blue-700 transition-colors shadow-sm disabled:opacity-50 flex items-center gap-2",children:[(0,s.jsx)(a.MdSave,{className:"text-[16px]"}),w?"Saving...":"Save Order"]})]})]})}):null}e.s(["default",()=>i])},13128,e=>{"use strict";var s=e.i(66497),t=e.i(10977),a=e.i(31538),l=e.i(42776),r=e.i(96887),i=e.i(25697);function d(){let[e,d]=(0,t.useState)(!1),[n,o]=(0,t.useState)([]),[c,x]=(0,t.useState)({totalRevenue:0,pendingOrders:0,lowStockProducts:0,totalProducts:0}),{settings:m}=(0,i.useSettings)(),p=m?.currency==="INR"?"₹":m?.currency==="USD"?"$":m?.currency==="EUR"?"€":m?.currency==="GBP"?"£":"$";return(0,t.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([(0,a.fetchOrders)({limit:5}),(0,a.fetchDashboardStats)()]);o(e.orders||[]),x(s)}catch(e){console.error("Failed to load dashboard data",e)}})()},[]),(0,s.jsxs)("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-3 md:p-5 scroll-smooth",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col gap-4",children:[(0,s.jsxs)("header",{className:"flex flex-wrap justify-between items-end gap-3 pb-2 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,s.jsx)("h2",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs font-medium",children:[(0,s.jsx)(r.MdCalendarToday,{className:"text-[14px]"}),(0,s.jsx)("span",{children:new Date().toLocaleDateString()}),(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),(0,s.jsx)("span",{children:"Overview"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"flex items-center justify-center bg-white border border-gray-200 rounded-lg h-9 w-9 text-gray-500 hover:text-primary hover:border-primary transition-colors cursor-pointer",children:(0,s.jsx)(r.MdNotifications,{className:"text-lg"})}),(0,s.jsxs)("button",{onClick:()=>d(!0),className:"bg-primary hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg text-xs font-medium shadow-sm transition-colors flex items-center gap-1.5 cursor-pointer",children:[(0,s.jsx)(r.MdAdd,{className:"text-[16px]"})," New Order"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 shadow-sm flex flex-col gap-1 relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:(0,s.jsx)(r.MdPayments,{className:"text-4xl text-primary"})}),(0,s.jsx)("p",{className:"text-gray-500 text-xs font-medium",children:"Total Revenue"}),(0,s.jsxs)("p",{className:"text-gray-900 text-xl font-bold tracking-tight",children:[p,c.totalRevenue.toFixed(2)]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-green-600 text-[10px] font-medium",children:[(0,s.jsx)(r.MdTrendingUp,{}),(0,s.jsx)("span",{children:"+0%"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 shadow-sm flex flex-col gap-1 relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:(0,s.jsx)(r.MdPendingActions,{className:"text-4xl text-amber-500"})}),(0,s.jsx)("p",{className:"text-gray-500 text-xs font-medium",children:"Pending Orders"}),(0,s.jsx)("p",{className:"text-gray-900 text-xl font-bold tracking-tight",children:c.pendingOrders}),(0,s.jsx)("p",{className:"text-slate-400 text-[10px] font-medium",children:"Orders to process"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 shadow-sm flex flex-col gap-1 relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:(0,s.jsx)(r.MdWarning,{className:"text-4xl text-red-500"})}),(0,s.jsx)("p",{className:"text-gray-500 text-xs font-medium",children:"Low Stock Alerts"}),(0,s.jsxs)("p",{className:"text-gray-900 text-xl font-bold tracking-tight",children:[c.lowStockProducts," Items"]}),(0,s.jsx)("p",{className:"text-slate-400 text-[10px] font-medium",children:"Needs attention"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 shadow-sm flex flex-col gap-1 relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:(0,s.jsx)(r.MdPrint,{className:"text-4xl text-blue-500"})}),(0,s.jsx)("p",{className:"text-gray-500 text-xs font-medium",children:"Total Products"}),(0,s.jsx)("p",{className:"text-gray-900 text-xl font-bold tracking-tight",children:c.totalProducts}),(0,s.jsx)("p",{className:"text-slate-400 text-[10px] font-medium",children:"In inventory"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg border border-gray-200 shadow-sm p-3 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:"Sales Overview"}),(0,s.jsx)("p",{className:"text-gray-500 text-[10px]",children:"Last 7 Days Performance"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[p,"0.00"]}),(0,s.jsx)("p",{className:"text-slate-400 text-[10px] font-medium",children:"No data"})]})]}),(0,s.jsx)("div",{className:"flex-1 min-h-[120px] w-full relative flex items-center justify-center bg-slate-50 rounded",children:(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"No sales data available"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-3 flex flex-col",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:"Inventory Health"}),(0,s.jsx)("p",{className:"text-gray-500 text-[10px]",children:"Critical Stock Levels"})]}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center bg-slate-50 rounded h-32",children:(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"No inventory data"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-base font-bold text-gray-900",children:"Recent Orders"}),(0,s.jsx)("a",{className:"text-xs font-medium text-primary hover:text-blue-700",href:"/orders",children:"View All"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-xs text-left",children:[(0,s.jsx)("thead",{className:"text-[10px] text-gray-500 uppercase bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 font-semibold",children:"Order ID"}),(0,s.jsx)("th",{className:"px-4 py-2 font-semibold",children:"Customer"}),(0,s.jsx)("th",{className:"px-4 py-2 font-semibold",children:"Job Type"}),(0,s.jsx)("th",{className:"px-4 py-2 font-semibold",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-2 font-semibold",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-2 font-semibold text-right",children:"Total"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===n.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-slate-500 italic",children:"No recent orders found"})}):n.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("td",{className:"px-4 py-2.5 font-medium text-gray-900",children:["#",e._id.substring(0,8)]}),(0,s.jsx)("td",{className:"px-4 py-2.5",children:e.customer?.name||"Unknown"}),(0,s.jsxs)("td",{className:"px-4 py-2.5",children:[e.products?.length||0," Items"]}),(0,s.jsx)("td",{className:"px-4 py-2.5 text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-4 py-2.5",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-800",children:e.status})}),(0,s.jsxs)("td",{className:"px-4 py-2.5 text-right font-medium",children:[p,e.totalAmount?.toFixed(2)]})]},e._id))})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Quick Actions"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("button",{onClick:()=>d(!0),className:"flex flex-col items-center justify-center gap-1.5 p-2 rounded border border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,s.jsx)(r.MdShoppingCart,{className:"text-primary text-xl"}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-gray-700",children:"New Order"})]}),(0,s.jsxs)("button",{className:"flex flex-col items-center justify-center gap-1.5 p-2 rounded border border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,s.jsx)(r.MdInventory,{className:"text-primary text-xl"}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-gray-700",children:"Add Stock"})]}),(0,s.jsxs)("button",{className:"flex flex-col items-center justify-center gap-1.5 p-2 rounded border border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,s.jsx)(r.MdPersonAdd,{className:"text-primary text-xl"}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-gray-700",children:"New Client"})]}),(0,s.jsxs)("button",{className:"flex flex-col items-center justify-center gap-1.5 p-2 rounded border border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,s.jsx)(r.MdPrint,{className:"text-primary text-xl"}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-gray-700",children:"Print Queue"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-red-200 shadow-sm p-4 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(r.MdWarning,{className:"text-red-500 text-lg"}),(0,s.jsx)("h3",{className:"text-sm font-bold text-gray-900",children:"Critical Stock"})]}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsx)("div",{className:"p-4 text-center text-xs text-slate-500 italic",children:"No critical stock alerts"})})]})]})]})]})}),(0,s.jsx)(l.default,{isOpen:e,onClose:()=>d(!1)})]})}e.s(["default",()=>d])}]);